!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ReduxUndo=t():e.ReduxUndo=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ActionTypes={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionCreators={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}function o(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)}function i(){return console.warn("distinctState is deprecated in beta4 and newer. The distinctState behavior is now default, which means only actions resulting in a new state are recorded. See https://github.com/omnidan/redux-undo#filtering-actions for more details."),function(){return!0}}function u(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}}function a(e){var t=r(e);return function(e){return 0>t.indexOf(e.type)}}function c(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}},function(){return!0})}function s(e){var t=r(e);return function(e){return 0>t.indexOf(e.type)?null:e.type}}function l(e,t,n){return{past:e,present:t,future:n,group:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_latestUnfiltered:t,index:e.length,limit:e.length+n.length+1}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=o,t.distinctState=i,t.includeAction=u,t.excludeAction=a,t.combineFilters=c,t.groupByActionTypes=s,t.newHistory=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return o.ActionTypes}}),Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return o.ActionCreators}});var i=n(1);Object.defineProperty(t,"parseActions",{enumerable:!0,get:function(){return i.parseActions}}),Object.defineProperty(t,"isHistory",{enumerable:!0,get:function(){return i.isHistory}}),Object.defineProperty(t,"distinctState",{enumerable:!0,get:function(){return i.distinctState}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return i.includeAction}}),Object.defineProperty(t,"excludeAction",{enumerable:!0,get:function(){return i.excludeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return i.combineFilters}}),Object.defineProperty(t,"groupByActionTypes",{enumerable:!0,get:function(){return i.groupByActionTypes}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return i.newHistory}});var u=n(4);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}function o(){f={header:[],prev:[],action:[],next:[],msgs:[]}}function i(){var e=f,t=e.header,n=e.prev,o=e.next,i=e.action,u=e.msgs;if(console.group){var a,c,s,l,p;(a=console).groupCollapsed.apply(a,r(t)),(c=console).log.apply(c,r(n)),(s=console).log.apply(s,r(i)),(l=console).log.apply(l,r(o)),(p=console).log.apply(p,r(u)),console.groupEnd()}else{var d,y,g,v,T;(d=console).log.apply(d,r(t)),(y=console).log.apply(y,r(n)),(g=console).log.apply(g,r(i)),(v=console).log.apply(v,r(o)),(T=console).log.apply(T,r(u))}}function u(e,t,n){return["%c"+e,"color: "+t+"; font-weight: bold",n]}function a(e,t){o(),p&&(console.group?(f.header=["%credux-undo","font-style: italic","action",e.type],f.action=u("action",d.action,e),f.prev=u("prev history",d.prevState,t)):(f.header=["redux-undo action",e.type],f.action=["action",e],f.prev=["prev history",t]))}function c(e){p&&(f.next=console.group?u("next history",d.nextState,e):["next history",e],i())}function s(){if(p){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];f.msgs=f.msgs.concat([].concat(t,["\n"]))}}function l(e){p=e}Object.defineProperty(t,"__esModule",{value:!0});var p=void 0,f=void 0,d={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};t.set=l,t.start=a,t.end=c,t.log=s},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n=(0,v.newHistory)([],e,[]);return t&&(n._latestUnfiltered=null),n}function i(e){return e.past.length+1}function u(e,t,n,o){y.log("inserting",t),y.log("new free: ",n-i(e));var u=e.past,a=e._latestUnfiltered,c=n&&i(e)>=n,s=u.slice(c?1:0),l=null!=a?[].concat(r(s),[a]):s;return(0,v.newHistory)(l,t,[],o)}function a(e,t){if(0>t||t>=e.future.length)return e;var n=e.past,o=e.future,i=e._latestUnfiltered,u=[].concat(r(n),[i],r(o.slice(0,t))),a=o[t],c=o.slice(t+1);return(0,v.newHistory)(u,a,c)}function c(e,t){if(0>t||t>=e.past.length)return e;var n=e.past,o=e.future,i=e._latestUnfiltered,u=n.slice(0,t),a=[].concat(r(n.slice(t+1)),[i],r(o));return(0,v.newHistory)(u,n[t],a)}function s(e,t){return t>0?a(e,t-1):0>t?c(e,e.past.length+t):e}function l(e,t){return t.indexOf(e)>-1?e:!e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.set(t.debug);var n={initTypes:(0,v.parseActions)(t.initTypes,["@@redux-undo/INIT"]),limit:t.limit,filter:t.filter||function(){return!0},groupBy:t.groupBy||function(){return null},undoType:t.undoType||g.ActionTypes.UNDO,redoType:t.redoType||g.ActionTypes.REDO,jumpToPastType:t.jumpToPastType||g.ActionTypes.JUMP_TO_PAST,jumpToFutureType:t.jumpToFutureType||g.ActionTypes.JUMP_TO_FUTURE,jumpType:t.jumpType||g.ActionTypes.JUMP,clearHistoryType:Array.isArray(t.clearHistoryType)?t.clearHistoryType:[t.clearHistoryType||g.ActionTypes.CLEAR_HISTORY],neverSkipReducer:t.neverSkipReducer||!1,ignoreInitialState:t.ignoreInitialState||!1,syncFilter:t.syncFilter||!1},r=n.history;return function(){for(var t=arguments.length,i=Array(t>2?t-2:0),p=2;t>p;p++)i[p-2]=arguments[p];var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.start(T,d);var A=d;if(!r)if(y.log("history is uninitialized"),void 0===d){var m={type:g.ActionTypes.CLEAR_HISTORY},h=e.apply(void 0,[d,m].concat(i));A=o(h,n.ignoreInitialState),y.log("do not set initialState on probe actions")}else(0,v.isHistory)(d)?(A=r=n.ignoreInitialState?d:(0,v.newHistory)(d.past,d.present,d.future),y.log("initialHistory initialized: initialState is a history",r)):(A=r=o(d,n.ignoreInitialState),y.log("initialHistory initialized: initialState is not a history",r));var O=function(t){return n.neverSkipReducer?f({},t,{present:e.apply(void 0,[t.present,T].concat(i))}):t},x=void 0;switch(T.type){case void 0:return A;case n.undoType:return x=s(A,-1),y.log("perform undo"),y.end(x),O(x);case n.redoType:return x=s(A,1),y.log("perform redo"),y.end(x),O(x);case n.jumpToPastType:return x=c(A,T.index),y.log("perform jumpToPast to "+T.index),y.end(x),O(x);case n.jumpToFutureType:return x=a(A,T.index),y.log("perform jumpToFuture to "+T.index),y.end(x),O(x);case n.jumpType:return x=s(A,T.index),y.log("perform jump to "+T.index),y.end(x),O(x);case l(T.type,n.clearHistoryType):return x=o(A.present,n.ignoreInitialState),y.log("perform clearHistory"),y.end(x),O(x);default:if(x=e.apply(void 0,[A.present,T].concat(i)),n.initTypes.some(function(e){return e===T.type}))return y.log("reset history due to init action"),y.end(r),r;if(A._latestUnfiltered===x)return A;if("function"==typeof n.filter&&!n.filter(T,x,A)){var b=(0,v.newHistory)(A.past,x,A.future,A.group);return n.syncFilter||(b._latestUnfiltered=A._latestUnfiltered),y.log("filter ignored action, not storing it in past"),y.end(b),b}var _=n.groupBy(T,x,A);if(null!=_&&_===A.group){var P=(0,v.newHistory)(A.past,x,A.future,A.group);return y.log("groupBy grouped the action with the previous action"),y.end(P),P}return A=u(A,x,n.limit,_),y.log("inserted new state into history"),y.end(A),A}}}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=p;var d=n(3),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),g=n(0),v=n(1);e.exports=t.default},function(e,t,n){e.exports=n(2)}])});